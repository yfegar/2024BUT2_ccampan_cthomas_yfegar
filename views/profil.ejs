<%- include("header") -%>

    <body>
        <div class="zone-profil">
            <div class="image_profil">
                <img src="/img/femme_profil.jfif" alt="">
            </div>
            <div class="informations-profil">
                <h1><%= user.prenom%> <%= user.nom%></h1>
                <h4 class="h4_profil"><strong>Date de naissance</strong> : <%= formatDate(user.ddn)%></h4>
                <h4 class="h4_profil"><strong>Adresse mail</strong> : <%= user.email%></h4>
                <h4 class="h4_profil"><strong>Identifiant</strong> : <%= user.login%> </h4>
                <h4 class="h4_profil"><strong>Mot de passe</strong> : ************</h4>
            </div>
            <div class="boutons_profil">
                <button id="modifier_profil">Modifier les informations</button>


                <form action="user/deleteaccount" method="post">
                    <input type="hidden" name="utilisateur_id" value="<%= user.id %>">
                    <button type="submit" class="supprimer_profil" id="poubelle-agent" onclick="return confirm('Êtes-vous sûr de vouloir supprimer votre compte ?')">
                        <p>Supprimer le compte</p>
                        <img src="/img/bin.png" alt="poubelle de supression">
                    </button>
                </form>

            </div>
        </div>

        <div id="change_profil" style="display: none;">
            <form class="profil_form" action="/user/update" method="post">
                <ul>
                    <li>
                        <h3>Modifier les informations</h3>
                        <input type="hidden" name="id" value="<%= user.id %>">
                    </li>
                    <li>
                        <label for="name">Nom </label>
                        <input type="text" id="name" name="nom"  placeholder="<%= user.nom%>" />
                        
                    </li>
                    <li>
                        <label for="name">Prénom </label>
                        <input type="text" id="firstname" name="prenom"  placeholder="<%= user.prenom%>" />
                    </li>
                    <li>
                        <label for="ddn">Date de naissance</label>
                        <input type="text" id="ddn" name="ddn" placeholder="<%= formatDate(user.ddn)%>" />
                    </li>
                    <li>
                        <label for="mail">E-mail </label>
                        <input type="email" id="mail" name="email" placeholder="<%= user.email%>" />
                    </li>
                    <li>
                        <label for="password">Mot de passe actuel </label>
                        <input type="password" name="currentPassword"></input>
                    </li>
                    <li>
                        <label for="password">Nouveau mot de passe </label>
                        <input type="password" name="password"></input>
                    </li>
                </ul>
                <button class="modif-bouton-form"type="submit"><p>Modifier</p></button>
            </form>

        </div>

    <script>
        // Afficher/Masquer le formulaire au clic
        const showFormBtn = document.getElementById('modifier_profil');
        const formContainer = document.getElementById('change_profil');

        showFormBtn.addEventListener('click', () => {
            if (formContainer.style.display === 'none' || formContainer.style.display === '') {
                formContainer.style.display = 'block'; // Afficher le formulaire
            } else {
                formContainer.style.display = 'none'; // Masquer le formulaire
            }
        });
    </script>

    </body>

    <%- include("footer") -%>